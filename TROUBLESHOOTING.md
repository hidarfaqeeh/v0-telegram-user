# 🔧 دليل استكشاف أخطاء البوت

## 🚨 المشاكل الشائعة وحلولها

### 1️⃣ البوت لا يستجيب للأوامر

#### الأسباب المحتملة:
- ❌ البوت غير مشغل
- ❌ رمز البوت غير صحيح
- ❌ معرف المدير غير صحيح
- ❌ لم تبدأ محادثة مع البوت

#### الحلول:
\`\`\`bash
# 1. شغل أداة التشخيص
python bot_diagnostics.py

# 2. اختبر البوت البسيط
python simple_bot_test.py

# 3. تحقق من السجلات
cat logs/bot.log
\`\`\`

### 2️⃣ خطأ "Unauthorized" أو "Invalid token"

#### السبب:
رمز البوت غير صحيح أو منتهي الصلاحية

#### الحل:
1. اذهب إلى @BotFather
2. أرسل `/mybots`
3. اختر البوت الخاص بك
4. اضغط "API Token"
5. انسخ الرمز الجديد كاملاً
6. استبدل BOT_TOKEN في ملف .env

### 3️⃣ خطأ "Forbidden: bot was blocked by the user"

#### السبب:
المدير لم يبدأ محادثة مع البوت

#### الحل:
1. ابحث عن البوت في تليغرام
2. اضغط "Start"
3. أرسل `/start`

### 4️⃣ خطأ في ADMIN_IDS

#### الحل:
1. أرسل رسالة لـ @userinfobot
2. انسخ User ID
3. أضفه لـ ADMIN_IDS في .env:
\`\`\`env
ADMIN_IDS=123456789,987654321
\`\`\`

### 5️⃣ مشاكل الشبكة

#### الحلول:
- استخدم VPN
- تحقق من الإنترنت
- جرب خادم مختلف

## 🛠️ أدوات التشخيص

### تشغيل التشخيص الشامل:
\`\`\`bash
python bot_diagnostics.py
\`\`\`

### اختبار البوت البسيط:
\`\`\`bash
python simple_bot_test.py
\`\`\`

### فحص السجلات:
\`\`\`bash
# عرض آخر 50 سطر من السجل
tail -50 logs/bot.log

# مراقبة السجل بشكل مباشر
tail -f logs/bot.log
\`\`\`

## 📋 قائمة التحقق

قبل تشغيل البوت، تأكد من:

- [ ] ملف .env موجود ومعبأ بالبيانات الصحيحة
- [ ] BOT_TOKEN صحيح ومن @BotFather
- [ ] ADMIN_IDS يحتوي على معرفك الصحيح
- [ ] بدأت محادثة مع البوت (/start)
- [ ] الإنترنت يعمل ويمكن الوصول لـ api.telegram.org

## 🆘 طلب المساعدة

إذا استمرت المشكلة:

1. شغل `python bot_diagnostics.py`
2. احفظ نتائج التشخيص
3. تحقق من ملف `logs/bot.log`
4. اجمع معلومات النظام:
   - نظام التشغيل
   - إصدار Python
   - رسائل الخطأ

## 💡 نصائح إضافية

1. **استخدم بيئة افتراضية منفصلة**
2. **احدث المكتبات بانتظام**
3. **راجع السجلات دورياً**
4. **اختبر البوت على خادم محلي أولاً**
5. **احتفظ بنسخة احتياطية من الإعدادات**
